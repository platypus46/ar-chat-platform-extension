<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script>
    AFRAME.registerComponent('char-pager', {
  schema: {
      chars: {default: ['0','1','2','3','4',
      '5','6','7','8','9',
      '!', '@', '#', '$', '%', 
      '^', '&', '*', '(', ')']},
      current: {default: 0}
  },
  init: function () {
      let data = this.data;
      let el = this.el;

      function refreshChars() {
          let start = data.current;
          let end = start + 5;
          let displayedChars = data.chars.slice(start, end);
          
          const totalWidth = 0.1;
          const numOfBoxes = 7;  // 5 chars + 2 pagination buttons
          const boxWidth = totalWidth / numOfBoxes;
          const spacing = boxWidth; 

          el.innerHTML = '';

          // Previous button
          let prevButton = document.createElement('a-text');
          prevButton.setAttribute('value', '<');
          prevButton.setAttribute('color', 'black');
          prevButton.setAttribute('position', {x: - (totalWidth / 2) + (boxWidth / 2), y: 0, z: 0.001}); 
          prevButton.setAttribute('scale', '0.02 0.02 0.02'); 

          let prevBox = document.createElement('a-box');
          prevBox.setAttribute('position', {x: - (totalWidth / 2) + (boxWidth / 2), y: 0, z: 0});
          prevBox.setAttribute('scale', `${boxWidth} 0.02 0.002`);
          prevBox.setAttribute('color', 'white');
          prevBox.setAttribute('class', 'clickable');

          prevBox.addEventListener('click', function() {
              if (data.current > 0) {
                  data.current -= 5;
                  refreshChars();
              }
          });

          el.appendChild(prevBox);
          el.appendChild(prevButton);

          displayedChars.forEach((char, index) => {
            let charEntity = document.createElement('a-text');
            charEntity.setAttribute('value', char);
            charEntity.setAttribute('color', 'black');
            charEntity.setAttribute('position', {x: (index + 1) * spacing - (totalWidth / 2) + (boxWidth / 2), y: 0, z: 0.001}); 
            charEntity.setAttribute('scale', '0.03 0.03 0.03'); 
        
            let boxEntity = document.createElement('a-box');
            boxEntity.setAttribute('position', {x: (index + 1) * spacing - (totalWidth / 2) + (boxWidth / 2), y: 0, z: 0});
            boxEntity.setAttribute('scale', `${boxWidth} 0.02 0.002`);
            boxEntity.setAttribute('color', 'white');
            boxEntity.setAttribute('class', 'clickable');
        
            boxEntity.addEventListener('click', function() {
                charEntity.setAttribute('color', 'yellow');
                if (sttText) {
                    let currentText = sttText.getAttribute('value');
                    sttText.setAttribute('value', currentText + char);
                }
            });
        
            el.appendChild(boxEntity);
            el.appendChild(charEntity);
        });
        
          // Next button
          let nextButton = document.createElement('a-text');
          nextButton.setAttribute('value', '>');
          nextButton.setAttribute('color', 'black');
          nextButton.setAttribute('position', {x: 6 * spacing - (totalWidth / 2) + (boxWidth / 2), y: 0, z: 0.001}); 
          nextButton.setAttribute('scale', '0.02 0.02 0.02'); 

          let nextBox = document.createElement('a-box');
          nextBox.setAttribute('position', {x: 6 * spacing - (totalWidth / 2) + (boxWidth / 2), y: 0, z: 0});
          nextBox.setAttribute('scale', `${boxWidth} 0.02 0.002`);
          nextBox.setAttribute('color', 'white');
          nextBox.setAttribute('class', 'clickable');

          nextBox.addEventListener('click', function() {
              if (data.current + 5 < data.chars.length) {
                  data.current += 5;
                  refreshChars();
              }
          });

          el.appendChild(nextBox);
          el.appendChild(nextButton);
      }

      refreshChars();
  }
});
    </script>
</head>
<body>
    <a-scene>
        <a-entity char-pager position="0 1.6 -2"></a-entity>

     
        <a-entity laser-controls="hand: left" raycaster="objects: .clickable"></a-entity>

        <a-entity laser-controls="hand: right" raycaster="objects: .clickable"></a-entity>
        <a-entity id="leftHand" hand-tracking-controls="hand: left;" hand-tracking-extras>
            <a-entity finger-cursor raycaster="objects: .clickable; far: 0.03"></a-entity>
        </a-entity>
        <a-entity id="rightHand" hand-tracking-controls="hand: right;" hand-tracking-extras>
            <a-entity finger-cursor raycaster="objects: .clickable; far: 0.03"></a-entity>
        </a-entity>
    </a-scene>
</body>
</html>

